'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _mkdirp = require('mkdirp');

var _mkdirp2 = _interopRequireDefault(_mkdirp);

var _touch = require('touch');

var _touch2 = _interopRequireDefault(_touch);

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _dart = require('./dart');

var _dart2 = _interopRequireDefault(_dart);

var _ts = require('./ts');

var _ts2 = _interopRequireDefault(_ts);

exports['default'] = function (filename) {
  var info = _path2['default'].parse(filename);

  (0, _mkdirp2['default'])(_path2['default'].join(process.cwd(), info.dir), function (err) {
    var dir = _path2['default'].join(process.cwd(), info.dir);

    if (err) {
      console.error(err);
    } else {
      (0, _touch2['default'])(dir + '/' + info.base);

      if (info.ext == '.dart') {
        _fs2['default'].writeFileSync(dir + '/' + info.base, (0, _dart2['default'])(info));
      } else if (info.ext == '.ts') {
        _fs2['default'].writeFileSync(dir + '/' + info.base, (0, _ts2['default'])(info));
      }

      (0, _touch2['default'])(dir + '/' + info.name + '.css');
      (0, _touch2['default'])(dir + '/' + info.name + '.html');

      console.log(_chalk2['default'].blue('->') + ' ' + _chalk2['default'].cyan(info.dir) + '/' + _chalk2['default'].red(info.name) + info.ext);
      console.log(_chalk2['default'].blue('->') + ' ' + _chalk2['default'].cyan(info.dir) + '/' + _chalk2['default'].green(info.name) + '.css');
      console.log(_chalk2['default'].blue('->') + ' ' + _chalk2['default'].cyan(info.dir) + '/' + _chalk2['default'].magenta(info.name) + '.html');
    }
  });
};

module.exports = exports['default'];